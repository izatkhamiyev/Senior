 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

function ja(b,c,f){return b*(1-f)+c*f}function za(b,c){var f=new XMLHttpRequest;f.open("GET",b,!0);f.withCredentials=!1;f.onreadystatechange=function(){4===f.readyState&&200===f.status&&c(f.responseText)};f.send()}function Ba(b,c,f){return Math.min(Math.max((f-b)/(c-b),0),1)}
function Ea(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Fa(b,c){var f=c%8;return b[(c-f)/8]>>7-f&1}
function Ha(b){var c=JSON.parse(b);b=c.ne;var f=c.nf,l=c.n,n="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data),m=n.length,v;c=new Uint8Array(m);for(v=0;v<m;++v)c[v]=n.charCodeAt(v);n=new Float32Array(l);m=new Float32Array(f);v=b+f+1;var r,h;for(r=0;r<l;++r){var t=v*r;var w=0===Fa(c,t)?1:-1;var x=t+1;var F=1,L=0;for(h=x+b-1;h>=x;--h)L+=F*Fa(c,h),F*=2;h=L;x=c;F=t+1+b;L=m;var K=0,P=L.length;for(t=F;t<F+P;++t)L[K]=Fa(x,t),++K;for(t=x=0;t<f;++t)x+=m[t]*Math.pow(2,-t-
1);w=0===x&&0===h?0:w*(1+x)*Math.pow(2,1+h-Math.pow(2,b-1));n[r]=w}return n}
var u=function(){function b(g,B){g=a.createShader(g);a.shaderSource(g,B);a.compileShader(g);return a.getShaderParameter(g,a.COMPILE_STATUS)?g:!1}function c(g,B){g=b(a.VERTEX_SHADER,g);B=b(a.FRAGMENT_SHADER,B);var D=a.createProgram();a.attachShader(D,g);a.attachShader(D,B);a.linkProgram(D);return D}function f(g){void 0===g.Y&&(g.Y="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===g.sa&&(g.sa=["a0"]);void 0===g.da&&(g.da=
[2]);if(void 0===g.precision||"highp"===g.precision)g.precision=h;g.id=v++;void 0!==g.Nc&&g.Nc.forEach(function(D,ea){g.c=g.c.replace(D,g.Da[ea])});g.ab=0;g.da.forEach(function(D){g.ab+=4*D});g.Ca=c(g.Y,"precision "+g.precision+" float;\n"+g.c);g.m={};g.f.forEach(function(D){g.m[D]=a.getUniformLocation(g.Ca,D)});g.attributes={};g.ea=[];g.sa.forEach(function(D){var ea=a.getAttribLocation(g.Ca,D);g.attributes[D]=ea;g.ea.push(ea)});if(g.h){a.useProgram(g.Ca);m=g;n=g.id;for(var B in g.h)a.uniform1i(g.m[B],
g.h[B])}g.Hd=!0}function l(g){Ia.Uc(Q);n!==g.id&&(Q.X(),n=g.id,m=g,a.useProgram(g.Ca),g.ea.forEach(function(B){0!==B&&a.enableVertexAttribArray(B)}))}var n=-1,m=!1,v=0,r=!1,h="highp",t=["u1"],w=["u0"],x={u1:0},F={u0:0},L={u1:0,u2:1},K={u3:0},P={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:t,h:x},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:t,h:x,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],h:L},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:t,h:x},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:L},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:t,h:x},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:t,h:x},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:F},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:F},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:t,h:x},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:x},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:x},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:w,h:F},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:w,h:F},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:w,h:F},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:w,h:F},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:w,h:F},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:w,h:F},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:F},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:x},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:t,h:x,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],h:x,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],h:x,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],h:L},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],h:L},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:K},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:K},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:x,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:x,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],h:{u1:0,u30:1,u31:2}}},N={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],Da:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),Da:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},Q={Ta:function(){return r},l:function(){if(!r){h="highp";for(var g in P)f(P[g],g);u.set("s0");a.enableVertexAttribArray(0);g=Ja.l();r=!0;return g}},Ub:function(g){g.forEach(function(B){Q.cb(B)})},cb:function(g){P[g.id]=g;f(g,g.id)},sb:function(g,B,D){B||(B=g);P[B]=Object.create(N[g]);N[g].Da&&N[g].Da.forEach(function(ea,xa){P[B].c=P[B].c.replace(new RegExp(ea,"g"),D[xa])});f(P[B],B)},set:function(g){l(P[g])},
oc:function(g){return"undefined"!==typeof P[g]},td:function(){return m.qd},X:function(){-1!==n&&(n=-1,m.ea.forEach(function(g){0!==g&&a.disableVertexAttribArray(g)}))},Za:function(){var g=0;m.ea.forEach(function(B,D){D=m.da[D];a.vertexAttribPointer(B,D,a.FLOAT,!1,m.ab,g);g+=4*D})},kb:function(){a.enableVertexAttribArray(0)},na:function(){a.vertexAttribPointer(m.ea[0],2,a.FLOAT,!1,8,0)},Mb:function(g,B){a.uniform1i(m.m[g],B)},u:function(g,B){a.uniform1f(m.m[g],B)},P:function(g,B,D){a.uniform2f(m.m[g],
B,D)},Ud:function(g,B){a.uniform2fv(m.m[g],B)},Vd:function(g,B){a.uniform3fv(m.m[g],B)},Vc:function(g,B,D,ea){a.uniform3f(m.m[g],B,D,ea)},Nb:function(g,B){a.uniform4fv(m.m[g],B)},Wd:function(g,B){a.uniformMatrix2fv(m.m[g],!1,B)},Xd:function(g,B){a.uniformMatrix3fv(m.m[g],!1,B)},Yd:function(g,B){a.uniformMatrix4fv(m.m[g],!1,B)},H:function(g,B){Q.set(g);B.forEach(function(D){switch(D.type){case "4f":a.uniform4fv(m.m[D.name],D.value);break;case "3f":a.uniform3fv(m.m[D.name],D.value);break;case "2f":a.uniform2fv(m.m[D.name],
D.value);break;case "1f":a.uniform1f(m.m[D.name],D.value);break;case "1i":a.uniform1i(m.m[D.name],D.value);break;case "mat2":a.uniformMatrix2fv(m.m[D.name],!1,D.value);break;case "mat3":a.uniformMatrix3fv(m.m[D.name],!1,D.value);break;case "mat4":a.uniformMatrix4fv(m.m[D.name],!1,D.value)}})}};return Q}(),a=!1,La=function(){function b(h){console.log("ERROR in ContextFeedForward : ",h);return!1}var c=!1,f=!1,l=!1,n=!1,m=!0,v=!1,r={w:function(){return c.width},L:function(){return c.height},ud:function(){return c},
sd:function(){return a},o:function(){return m},flush:function(){a.flush()},tc:function(){v||(v=new Uint8Array(c.width*c.height*4));a.readPixels(0,0,c.width,c.height,a.RGBA,a.UNSIGNED_BYTE,v);return v},wd:function(){return c.toDataURL("image/jpeg")},xd:function(){J.J();f||(f=document.createElement("canvas"),l=f.getContext("2d"));f.width=c.width;f.height=c.height;var h=r.tc(),t=l.createImageData(f.width,f.height),w,x,F=f.width,L=f.height,K=t.data;for(x=0;x<L;++x){var P=L-x-1;for(w=0;w<F;++w){var N=
4*(x*F+w);var Q=4*(P*F+w);K[N]=h[Q];K[N+1]=h[Q+1];K[N+2]=h[Q+2];K[N+3]=h[Q+3]}}l.putImageData(t,0,0);return f.toDataURL("image/png")},vd:function(h){!f&&h&&(f=document.createElement("canvas"),l=f.getContext("2d"));var t=h?f:document.createElement("canvas");t.width=c.width;t.height=c.height;(h?l:t.getContext("2d")).drawImage(c,0,0);return t},l:function(h){h.hc&&!h.ha?c=document.getElementById(h.hc):h.ha&&(c=h.ha);c||(c=document.createElement("canvas"));c.width=h&&void 0!==h.width?h.width:512;c.height=
h&&void 0!==h.height?h.height:512;"undefined"===typeof h&&(h={});void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!1);void 0===h.ub&&(h.ub=!0);void 0===h.antialias&&(h.antialias=!1);var t={antialias:h.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:h.premultipliedAlpha,stencil:!1,depth:h.ub};a:{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var w=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);w=[parseInt(w[1],10),parseInt(w[2],10),parseInt(w[3]||0,10)];
if(12===w[0]||13===w[0]){w=!0;break a}}w=!1}w||(a=c.getContext("webgl2",t));a?m=!0:((a=c.getContext("webgl",t))||(a=c.getContext("experimental-webgl",t)),m=!1);if(!a)return b("WebGL is not enabled");(n=a.getExtension("WEBGL_lose_context"))&&c.addEventListener("webglcontextlost",h.Jc,!1);if(!Ka.l())return b("Not enough capabilities");if(!Ka.cc()&&m)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);
a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},Ac:function(){if(!u.l())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0}};return r}(),Ia=function(){var b="undefined"===typeof u?JEShaders:u;return{Uc:function(c){b!==c&&(b.X(),b=c)},Ta:function(){return b.Ta()},na:function(){b.na()},Za:function(){b.Za()},X:function(){b.X()},set:function(c){b.set(c)}}}(),M=function(){var b,c,f=0,l=-2,n=-2,m=!1,v={reset:function(){n=
l=-2},l:function(){m||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),c=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),v.fa(),m=!0)},a:function(r){var h=f++,t=r.T?r.T.length:0,w="undefined"===typeof r.mode?a.STATIC_DRAW:r.mode,x=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,x);a.bufferData(a.ARRAY_BUFFER,r.Qb instanceof Float32Array?
r.Qb:new Float32Array(r.Qb),w);l=h;if(r.T){var F=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,F);if(65536>r.T.length){var L=Uint16Array;var K=a.UNSIGNED_SHORT;var P=2}else L=Uint32Array,K=a.UNSIGNED_INT,P=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,r.T instanceof L?r.T:new L(r.T),w);n=h}var N={bc:function(Q){l!==h&&(a.bindBuffer(a.ARRAY_BUFFER,x),l=h);Q&&Ia.Za()},$b:function(){n!==h&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,F),n=h)},bind:function(Q){N.bc(Q);N.$b()},od:function(){a.drawElements(a.TRIANGLES,
t,K,0)},pd:function(Q,g){a.drawElements(a.TRIANGLES,Q,K,g*P)},remove:function(){a.deleteBuffer(x);r.T&&a.deleteBuffer(F);N=null}};return N},fa:function(){-1!==l&&(a.bindBuffer(a.ARRAY_BUFFER,b),l=-1);-1!==n&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c),n=-1)},g:function(r,h){r&&M.fa();h&&Ia.na();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},sc:function(){a.deleteBuffer(b);a.deleteBuffer(c)}};return v}(),J=function(){var b,c,f,l=!1,n={v:-2,qc:1};return{l:function(){if(!l){b=a.createFramebuffer();var m=
Ka.o();c=m&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;f=m&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;l=!0}},zd:function(){return c},Pa:function(){return f},aa:function(){return a.FRAMEBUFFER},Cd:function(){return n},rd:function(){return b},a:function(m){void 0===m.tb&&(m.tb=!1);var v=m.oa?m.oa:!1,r=m.width,h=void 0!==m.height?m.height:m.width,t=b,w=!1,x=!1,F=0;v&&(r=r?r:v.w(),h=h?h:v.L());var L={Lb:function(){x||(t=a.createFramebuffer(),x=!0,F=n.qc++)},Tb:function(){L.Lb();L.j();
w=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,w);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,r,h);a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,w);a.clearDepth(1)},bind:function(K,P){F!==n.v&&(a.bindFramebuffer(c,t),n.v=F);v&&v.j();P&&a.viewport(0,0,r,h);K&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},gd:function(){F!==n.v&&(a.bindFramebuffer(c,t),n.v=F)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},kd:function(){a.clear(a.COLOR_BUFFER_BIT)},
ld:function(){a.clear(a.DEPTH_BUFFER_BIT)},Wc:function(){a.viewport(0,0,r,h)},j:function(){F!==n.v&&(a.bindFramebuffer(c,t),n.v=F)},rtt:function(K){v=K;n.v!==F&&(a.bindFramebuffer(a.FRAMEBUFFER,t),n.v=F);K.j()},J:function(){a.bindFramebuffer(c,null);n.v=-1},resize:function(K,P){r=K;h=P;w&&(a.bindRenderbuffer(a.RENDERBUFFER,w),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,r,h))},remove:function(){a.bindFramebuffer(c,t);a.framebufferTexture2D(c,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0);w&&
a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null);a.bindFramebuffer(c,null);a.deleteFramebuffer(t);w&&a.deleteRenderbuffer(w);L=null}};m.tb&&L.Tb();return L},J:function(){a.bindFramebuffer(c,null);n.v=-1},bd:function(){a.bindFramebuffer(c,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,Ka.w(),Ka.L());n.v=-1},reset:function(){n.v=-2},R:function(){0!==n.v&&(a.bindFramebuffer(c,b),n.v=0)},clear:function(){a.viewport(0,0,Ka.w(),Ka.L());a.clear(a.COLOR_BUFFER_BIT)}}}(),
X=function(){function b(d){a.bindTexture(a.TEXTURE_2D,d)}function c(d){xa[0]=d;d=Ca[0];var H=d>>16&32768,O=d>>12&2047,T=d>>23&255;return 103>T?H:142<T?H|31744|((255==T?0:1)&&d&8388607):113>T?(O|=2048,H|(O>>114-T)+(O>>113-T&1)):H=(H|T-112<<10|O>>1)+(O&1)}function f(d){var H=new Uint16Array(d.length);d.forEach(function(O,T){H[T]=c(O)});return H}function l(){if(null!==pa.Qa)return pa.Qa;var d=m(f([1,1,1,1]));return null===d?!0:pa.Qa=d}function n(){if(null!==pa.Ra)return pa.Ra;var d=m(new Uint8Array([255,
255,255,255]));return null===d?!0:pa.Ra=d}function m(d){if(!Ia.Ta()||!K)return null;d=ca.a({isFloat:!1,I:!0,array:d,width:1});J.J();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);Ia.set("s0");d.fb(0);M.g(!1,!0);var H=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,H);H=.9<H[0];d.remove();J.R();return H}var v=0,r,h=0,t,w=!1,x,F,L,K=!1,P=!1,N,Q,g,B=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],D=!1,ea=!1,xa=new Float32Array(1),Ca=new Int32Array(xa.buffer),pa={Qa:null,
Ra:null},ca={l:function(){if(!K){F=[a.RGB,!1,a.RGB,a.RGBA];L=[a.RGB,!1,a.RGB,a.RGBA];r=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];D="undefined"!==typeof JEContext;ea="undefined"!==typeof Ka;D&&JEContext.Od()&&r.push(a.TEXTURE8,a.TEXTURE9);t=[-1,-1,-1,-1,-1,-1,-1,-1];x=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!w){for(var d=new Float32Array(16384),H=0;16384>H;++H)d[H]=2*Math.random()-1;w={random:ca.a({isFloat:!0,isPot:!0,array:d,width:64}),Pb:ca.a({isFloat:!1,
isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}K=!0}},zc:function(){ca.cd()},Fd:function(){return w.Pb},cd:function(){x[1]=Ka.va()},Qc:function(){L=F=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},Qd:function(d,H){u.set("s1");J.J();var O=d.w(),T=d.L();a.viewport(0,0,O,T);d.b(0);M.g(!1,!1);a.readPixels(0,0,O,T,a.RGBA,a.UNSIGNED_BYTE,H)},rc:function(d,H,O){a.activeTexture(a.TEXTURE0);v=0;var T=a.createTexture();b(T);var aa=Ka.o()&&a.RGBA32F?a.RGBA32F:a.FLOAT;H=H instanceof Float32Array?H:new Float32Array(H);var Y=
Math.log(H.length)/Math.log(2);Y!==Math.floor(Y)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,O);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,d.w(),d.L(),0,a.RGBA,aa,H);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);J.R();u.set("s0");d.A();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);
b(T);M.g(!0,!1);a.deleteTexture(T)},a:function(d){function H(){b(Z);qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,qa);d.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,d.xb?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,d.U?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));d.xa&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.yd().TEXTURE_MAX_ANISOTROPY_EXT,
JESETTINGS.ed);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,d.isLinear?a.LINEAR:a.NEAREST);d.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d.isMipmap&&!ta?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d.isMipmap&&!ta?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);fa=F[d.la-1];ba=L[d.la-1];ha=x[O];if(Ka.o()){var k=a.RGBA32F;fa===a.RGBA&&ha===a.FLOAT&&k&&(ba=k);fa===a.RGB&&ha===a.FLOAT&&k&&(ba=k,fa=a.RGBA)}if(d.I&&!d.isFloat||d.isFloat&&d.isMipmap&&Ja.Cc())(k=
a.RGBA16F)&&(ba=k),ha=Ka.va();d.Ab&&"undefined"!==typeof a.texStorage2D&&(ma=d.Ab);d.yb&&4===d.la&&(fa=JEContext.Dd());if(d.D)a.texImage2D(a.TEXTURE_2D,0,ba,fa,ha,d.D);else if(d.url)a.texImage2D(a.TEXTURE_2D,0,ba,fa,ha,I);else if(V){try{a.getError(),a.texImage2D(a.TEXTURE_2D,0,ba,E,z,0,fa,ha,V),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,ba,E,z,0,fa,ha,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,E,z,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(q){a.texImage2D(a.TEXTURE_2D,
0,ba,E,z,0,fa,ha,null)}d.isKeepArray||(V=null)}else a.texImage2D(a.TEXTURE_2D,0,ba,E,z,0,fa,ha,null);if(d.isMipmap)if(!ta&&W)W.Oa(),Aa=!0;else if(ta){k=Math.log(Math.min(E,z))/Math.log(2);var C;wa=Array(1+k);wa[0]=Z;for(C=1;C<=k;++C){var na=Math.pow(2,C);var ua=E/na;na=z/na;var e=a.createTexture();b(e);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,ba,ua,na,0,fa,ha,null);b(null);wa[C]=e}Aa=!0}b(null);
t[v]=-1;qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);y=!0;da&&W&&(da(W),da=!1)}"undefined"===typeof d.isFloat&&(d.isFloat=!1);"undefined"===typeof d.I&&(d.I=!1);"undefined"===typeof d.isPot&&(d.isPot=!0);"undefined"===typeof d.isLinear&&(d.isLinear=!1);"undefined"===typeof d.isMipmap&&(d.isMipmap=!1);"undefined"===typeof d.Ga&&(d.Ga=!1);void 0===d.xa&&(d.xa=!1);void 0===d.U&&(d.U=!1);void 0===d.xb&&(d.xb=!1);void 0===d.yb&&(d.yb=!1);void 0===d.la&&(d.la=4);void 0===d.vb&&(d.vb=!1);"undefined"===typeof d.isFlipY&&
(d.isFlipY=d.url||d.array?!0:!1);"undefined"===typeof d.isKeepArray&&(d.isKeepArray=!1);d.data&&(d.array="string"===typeof d.data?Ha(d.data):d.isFloat?new Float32Array(d.data):new Uint8Array(d.data),d.isFlipY=!1);var O=0,T=d.D?!0:!1,aa=null,Y=null,la=!1,va=null;d.isFloat&&(d.I=!0);d.I&&(O=1);d.vb||Ka.o()||!d.isFloat||!ea||Ka.hb()||(d.isFloat=!1);d.isFloat&&(O=2);d.xa&&D&&!JEContext.Jd()&&(d.xa=!1);var Z=a.createTexture(),da=d.Ga,I=null,V=!1,E=0,z=0,y=!1,G=h++,oa=!1,S,ka,Da,sa,ba,fa,ha,qa=d.isFlipY,
ta=d.I&&d.isMipmap&&"undefined"!==typeof Ja&&!Ja.ec()?!0:!1,wa,ma=-1,Aa=!1;"undefined"!==typeof d.width&&d.width&&(E=d.width,z="undefined"!==typeof d.height&&d.height?d.height:E);var W={get:function(){return Z},w:function(){return E},L:function(){return z},Gd:function(){return d.url},Kd:function(){return d.isFloat},Md:function(){return d.I},Nd:function(){return d.isLinear},Oa:function(){a.generateMipmap(a.TEXTURE_2D)},gb:function(k,C){ta?(k||(k=W.pb()),W.Ea(C),b(wa[k]),t[C]=-1):W.b(C)},pb:function(){-1===
ma&&(ma=Math.log(E)/Math.log(2));return ma},nb:function(k){if(ta){k||(k=W.pb());u.set("s11");W.Ea(0);var C,na=E,ua=z;for(C=1;C<=k;++C)na/=2,ua/=2,u.P("u7",.25/na,.25/ua),a.viewport(0,0,na,ua),b(wa[C-1]),a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,wa[C],0),M.g(!1,1===C);t[0]=-1}else W.Oa()},Ea:function(k){k!==v&&(a.activeTexture(r[k]),v=k)},b:function(k){if(!y)return!1;W.Ea(k);if(t[k]===G)return!1;b(Z);t[k]=G;return!0},fb:function(k){a.activeTexture(r[k]);v=k;b(Z);t[k]=G},j:function(){a.framebufferTexture2D(J.aa(),
a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Z,0)},A:function(){a.viewport(0,0,E,z);a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Z,0)},ae:function(){a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},resize:function(k,C){E=k;z=C;H()},clone:function(k){k=ca.a({width:E,height:z,I:d.I,isFloat:d.isFloat,isLinear:d.isLinear,U:d.U,isFlipY:k?!qa:qa,isPot:d.isPot});Ia.set("s0");J.R();k.j();a.viewport(0,0,E,z);W.b(0);M.g(!0,!0);return k},Wc:function(){a.viewport(0,0,E,z)},remove:function(){a.deleteTexture(Z);
W=null},refresh:function(){W.fb(0);qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);T?a.texImage2D(a.TEXTURE_2D,0,ba,fa,a.UNSIGNED_BYTE,d.D):a.texImage2D(a.TEXTURE_2D,0,ba,E,z,0,fa,ha,V);qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},ib:function(){var k=E*z*4;ka=[new Uint8Array(k),new Uint8Array(k),new Uint8Array(k),new Uint8Array(k)];S=[new Float32Array(ka[0].buffer),new Float32Array(ka[1].buffer),new Float32Array(ka[2].buffer),new Float32Array(ka[3].buffer)];Da=new Uint8Array(4*k);sa=new Float32Array(Da.buffer);
oa=!0},Kb:function(){oa||W.ib();a.readPixels(0,0,E,4*z,a.RGBA,a.UNSIGNED_BYTE,Da);var k,C=E*z,na=2*C,ua=3*C;for(k=0;k<C;++k)S[0][k]=sa[k],S[1][k]=sa[k+C],S[2][k]=sa[k+na],S[3][k]=sa[k+ua];return S},jb:function(){J.J();u.set("s12");W.b(0);for(var k=0;4>k;++k)a.viewport(0,z*k,E,z),u.Nb("u8",B[k]),M.g(!1,0===k)},be:function(k){var C=ha===x[0]&&!n();b(Z);qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,qa);C?(la||(aa=document.createElement("canvas"),aa.width=E,aa.height=z,Y=aa.getContext("2d"),va=Y.createImageData(E,
z),la=!0),va.data.set(k),Y.putImageData(va,0,0),a.texImage2D(a.TEXTURE_2D,0,ba,fa,ha,aa)):a.texImage2D(a.TEXTURE_2D,0,ba,E,z,0,fa,ha,k);t[v]=G;qa&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},ce:function(k,C){b(Z);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,C);a.texImage2D(a.TEXTURE_2D,0,ba,fa,ha,k);t[v]=G;C&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Sd:function(k,C){var na=E*z,ua=4*na;k=d.I?k?"RGBE":"JSON":"RGBA";C&&(k=C);C=Ka.o()&&!1;switch(k){case "RGBE":var e="s41";break;case "JSON":e=C?"s0":"s12";break;case "RGBA":case "RGBAARRAY":e=
"s6"}oa||("RGBA"===k||"RGBE"===k||"RGBAARRAY"===k?(ka=new Uint8Array(ua),oa=!0):"JSON"!==k||C||W.ib());J.J();u.set(e);W.b(0);if("RGBA"===k||"RGBE"===k||"RGBAARRAY"===k){a.viewport(0,0,E,z);M.g(!0,!0);a.readPixels(0,0,E,z,a.RGBA,a.UNSIGNED_BYTE,ka);if("RGBAARRAY"===k)return{data:ka};P||(N=document.createElement("canvas"),Q=N.getContext("2d"),P=!0);N.width=E;N.height=z;g=Q.createImageData(E,z);g.data.set(ka);Q.putImageData(g,0,0);var q=N.toDataURL("image/png")}else if("JSON"===k)if(C)q=new Float32Array(na),
a.viewport(0,0,E,z),M.g(!0,!0),a.readPixels(0,0,E,z,a.RGBA,a.FLOAT,q);else{for(q=0;4>q;++q)a.viewport(0,z*q,E,z),u.Nb("u8",B[q]),M.g(!q,!q);W.Kb();q=Array(na);for(e=0;e<na;++e)q[4*e]=S[0][e],q[4*e+1]=S[1][e],q[4*e+2]=S[2][e],q[4*e+3]=S[3][e]}return{format:k,data:q,width:E,height:z,isMirrorY:d.U,isFlipY:"RGBA"===k?d.isFlipY:!d.isFlipY}}};d.isMipmap&&!ta&&y&&!Aa&&(W.Oa(),Aa=!0);if(d.url)b(Z),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),I=new Image,I.nd="Anonymous",I.crossOrigin=
"Anonymous",I.src=d.url,I.onload=function(){E=I.width;z=I.height;H()};else if(d.D){var ya=function(){E=void 0!==d.D.videoWidth?d.D.videoWidth:d.D.width;z=void 0!==d.D.videoHeight?d.D.videoHeight:d.D.height;E?H():setTimeout(ya,1)};ya()}else d.array?(d.I&&!d.isFloat?d.array instanceof Uint16Array?(V=d.array,H()):l()?(V=f(d.array),H()):(H(),ca.rc(W,d.array,qa)):(V=d.isFloat?d.array instanceof Float32Array?d.array:new Float32Array(d.array):d.array instanceof Uint8Array?d.array:new Uint8Array(d.array),
H()),d.isKeepArray||(V&&V!==d.array&&(V=null),delete d.array)):H();W.wc=W.w;da&&y&&(da(W),da=!1);return W},J:function(d){d!==v&&(a.activeTexture(r[d]),v=d);t[d]=-1;b(null)},hd:function(d){w.random.b(d)},reset:function(){for(var d=0;d<r.length;++d)t[d]=-1;v=-1},Rd:function(){v=-1},Zd:function(){for(var d=0;d<r.length;++d)ca.J(d)},sc:function(){w&&(w.random.remove(),w.Pb.remove())},$d:function(d,H){if("RGBA"===d.format||"RGBE"===d.format){var O=new Image;O.src=d.data;O.onload=function(){ca.a({U:d.isMirrorY,
isFlipY:d.isFlipY,isFloat:!1,D:O,Ga:function(T){if("RGBA"===d.format)H(T);else{var aa=d.width,Y=d.height,la=ca.a({U:d.isMirrorY,isFloat:!0,width:aa,height:Y,isFlipY:d.isFlipY});J.R();a.viewport(0,0,aa,Y);u.set("s42");la.j();T.b(0);M.g(!0,!0);ca.J(0);H(la);a.flush();setTimeout(T.remove,50)}}})}}else"JSON"===d.format?H(ca.a({isFloat:!0,isFlipY:d.isFlipY,width:d.width,height:d.height,array:new Float32Array(d.data)})):H(!1)}};return ca}(),Ma={a:function(b){var c=[X.a(b),X.a(b)],f=[c[1],c[0]],l=f,n={Tc:function(m){l[1].j();
l[0].b(m);n.Ob()},Td:function(m){l[1].A();l[0].b(m);n.Ob()},Ob:function(){l=l===c?f:c},refresh:function(){l[0].refresh();l[1].refresh()},b:function(m){l[0].b(m)},Ad:function(){return l[0]}};return n}},Ka=function(){function b(){c="undefined"===typeof La?JEContext:La;f=!0}var c,f=!1,l=!1,n=!1,m=!1,v=!1,r=!1,h=!1,t=!1,w=!1,x=!1,F=!1,L=!0,K=!0,P=!0,N=!1,Q="undefined"===typeof window?{}:window,g={l:function(){if(f)return!0;b();g.lb();g.Na();g.mc();g.nc();J.l();X.l();if(!g.ic())return!1;M.l();X.zc();return!0},
w:function(){f||b();return c.w()},L:function(){f||b();return c.L()},o:function(){f||b();return c.o()},mc:function(){F=(x=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;Q.GL_EXT_COLORBUFFERFLOAT=x},nc:function(){a.getExtension("EXT_color_buffer_half_float")||a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},lb:function(){if(!l){this.o()||(n=a.getExtension("OES_texture_float")||
a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),v=(Q.GL_EXT_FLOAT=n)?!0:!1);if(v||this.o())m=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),Q.GL_EXT_FLOATLINEAR=m;l=!0}},Na:function(){if(!w){if(!this.o()){if(r=a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))N=r.HALF_FLOAT_OES,h=!0;
!N&&a.HALF_FLOAT&&(N=a.HALF_FLOAT);!N&&a.FLOAT&&(N=a.FLOAT);Q.GL_EXT_HALFFLOAT=r}if(h||this.o())t=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),Q.GL_EXT_HALFFLOATLINEAR=t;w=!0}},va:function(){if(g.o())return a.HALF_FLOAT;g.Na();return h?N:a.FLOAT},hb:function(){return L},dc:function(){return K},jd:function(){return P},cc:function(){return F},kc:function(){K=L=!0;var B=a.createFramebuffer();
a.bindFramebuffer(a.FRAMEBUFFER,B);var D=a.createTexture();a.bindTexture(a.TEXTURE_2D,D);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,g.o()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,D,0);var ea=a.checkFramebufferStatus(J.Pa());ea!==a.FRAMEBUFFER_COMPLETE&&(L=!1);a.texImage2D(a.TEXTURE_2D,0,g.o()&&a.RGBA16F?a.RGBA16F:a.RGBA,
1,1,0,a.RGBA,g.va(),null);a.framebufferTexture2D(J.aa(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,D,0);ea=a.checkFramebufferStatus(J.Pa());ea!==a.FRAMEBUFFER_COMPLETE&&(K=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(D);a.deleteFramebuffer(B)},jc:function(){var B=J.a({width:1});B.Lb();var D=X.a({width:1,isFloat:!0,la:3});B.j();D.j();a.flush();a.checkFramebufferStatus(J.Pa())!==a.FRAMEBUFFER_COMPLETE?(X.Qc(),P=!1):P=!0;B.remove();D.remove()},ic:function(){g.kc();
if(!L&&!K)return!1;g.jc();return!0}};return g}(),Ja=function(){var b=!1,c=[.8,1,.8,1],f=0,l,n=new Uint8Array(4),m=c.concat(c,c,c),v=!0,r={l:function(){function h(K,P,N,Q){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,Q?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);try{var g=a.getError();g!==a.NO_ERROR&&console.log("GLERR in test_mipmapping() :",g);a.texImage2D(a.TEXTURE_2D,0,K,2,2,0,a.RGBA,P,N);g=a.getError();if(g!==a.NO_ERROR)return!1}catch(B){return!1}Q&&a.generateMipmap(a.TEXTURE_2D);M.fa();M.g(!1,!0);
a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,n);g=a.getError();g===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,n),g=a.getError());return g!==a.NO_ERROR?!1:0!==n[0]}function t(K){return Ka.hb()&&h(x,a.FLOAT,new Float32Array(m),K)?(f=3,!0):!1}function w(K){return Ka.dc()?h(F,Ka.va(),new Uint16Array(m),K)||h(F,a.FLOAT,new Float32Array(m),K)?(f=2,!0):!1:!1}Ka.lb();Ka.Na();var x=a.RGBA,F=a.RGBA;if(La.o()){var L=
a.RGBA32F;L&&(x=L);(L=a.RGBA16F)&&(F=L)}M.l();J.reset();J.J();a.viewport(0,0,1,1);u.set("s0");b=!0;l=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,l);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(w(!0)||t(!0))return!0;v=!1;if(w(!1)||t(!1))return!0;if(La.o()){F=x=a.RGBA;if(w(!0)||t(!0))return!0;v=!1;if(w(!1)||t(!1))return!0}return!1},ec:function(){return v},
Bd:function(){return f},Ld:function(){b||r.l();return 3===f},Cc:function(){b||r.l();return 2===f}};return r}(),Na={a:function(b){var c=X.a(b.alpha),f=X.a(b.beta);return{lc:function(){c.b(1);f.b(2)}}}},Qa={a:function(b){var c=b.Yc;c.index=b.index;c.V=b.V;c.parent=b.parent;switch(c.type){case "input":b=Oa.a(c);break;default:b=Pa.a(c)}return b}},Oa={a:function(b){"undefined"===typeof b.sift&&(b.sift=!1);"undefined"===typeof b.DWT&&(b.DWT=!1);"undefined"===typeof b.blur&&(b.blur=!1);"undefined"===typeof b.siftOutWidth&&
(b.siftOutWidth=!1);"undefined"===typeof b.density&&(b.density=1);var c=!1;if(b.mask){c=!0;SETTINGS&&void 0!==SETTINGS.Zb&&(b.mask=SETTINGS.Zb+b.mask);var f=X.a({isFloat:!1,url:b.mask})}var l=!1,n="undefined"!==typeof b.preprocessing?b.preprocessing:!1,m=!1,v=!1;b.sift?Sift.l({yc:a,ha:!1,width:b.size,Pd:b.siftOutWidth}):b.DWT&&DWT.l({yc:a,ha:!1,width:b.size});var r=!1;b.customInputShader&&(r="s43",u.cb({name:"_",id:r,c:b.customInputShader,f:["uSource"],precision:"lowp"}),u.H(r,[{type:"1i",name:"_",
value:0}]));switch(n){case "sobel":var h="s32";m=!0;break;case "meanNormalization":h="s33";m=!0;break;case "grayScale":h="s29";m=!1;break;case "grayScaleTilt":h="s30";v=!0;m=!1;break;case "rgbGrayTilt":h="s31";v=!0;m=!1;break;case "copy":h=r?r:"s0";break;case "inputLightRegulation":h=r?r:"s29";Ra.l({width:b.size,Cb:b.nBlurPass,Bc:!1});l=!0;break;case "direct":case "none":h=!1;break;default:h="s3"}v&&u.H(h,[{name:"u28",type:"1f",value:b.tilt}]);c&&(h+="Mask");if(b.blur)var t=X.a({isFloat:!1,isPot:!1,
width:b.size});var w=X.a({isFloat:!1,isPot:!1,width:b.size}),x={w:function(){return b.sift?Sift.ka():b.size},ka:function(){return x.w()},vc:function(){return b.sift?Sift.wa():b.DWT?DWT.wa():l?Ra.wa():w},F:function(){J.R();b.blur&&(t.A(),u.set("s44"),u.P("u7",1/b.size,1/b.size),M.g(!1,!0),t.b(0));h&&(u.set(h),m&&u.u("u29",1/b.size),w.A(),c&&f.b(1),M.g(!1,!1),w.b(0),l?Ra.Wa(w):b.sift?(u.X(),Sift.Wa()):b.DWT&&(u.X(),DWT.Wa(4)))}};return x}},Pa={a:function(b){"undefined"===typeof b.disableNormalize&&
(b.disableNormalize=!1);var c=[],f=[],l,n,m=!1,v,r=!0,h,t,w=b.isReorganize?b.isReorganize:!1,x=b.kernelsNumber?!0:!1,F=b.dynPelu?Na.a(b.dynPelu):!1,L=F?!0:!1,K={isEnabled:!1},P;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(b.num_classes))/Math.log(2)));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.V.ka();b.gain="undefined"!==typeof b.gain?b.gain:1;u.H("s20",[{type:"1f",name:"u10",value:b.gain}]);var N=X.a({isFloat:!0,isPot:!1,width:b.size}),
Q=X.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});r=!1;var g=new Uint8Array(Math.pow(4*b.size,2)),B;for(B=0;B<b.size*b.size;++B){var D=B<b.num_classes?255:0;g[4*B]=D;g[4*B+1]=D;g[4*B+2]=D;g[4*B+3]=D}var ea=X.a({isFloat:!1,isPot:!1,width:b.size,array:g})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.V.ka(),r=!1):"full"===b.connectivityUp&&(b.sparsity=b.V.ka());var xa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],
Ca=b.sparsity*b.sparsity,pa=!1,ca=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var d="s34";break;case 4:d="s35"}pa=!0;ca/=b.maxPooling.size;var H=X.a({isFloat:!0,isPot:!1,width:ca})}var O=void 0!==b.Ic&&b.Ic?!0:!1,T=null,aa=null,Y=null;O&&(T="s45"+b.index.toString(),u.sb("s45",T,[((b.normalization.n-1)/2).toFixed(1)]),u.H(T,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},
{type:"1f",name:"u33",value:b.normalization.k}]),aa=X.a({isFloat:!0,isPot:!0,width:b.size}),Y=X.a({isFloat:!0,isPot:!0,width:b.size}));var la,va,Z,da;r&&(da=X.a({isFloat:!0,isPot:!1,width:b.size}));var I=X.a(b.bias),V,E={w:function(){return b.size},ka:function(){return ca},qb:function(){return b.num_classes},ac:function(z){P.b(z)},Lc:function(){b.remap&&b.remap.isEnabled&&(K={isEnabled:!0,Ec:X.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,
isPot:!1}),layers:b.remap.layers.map(function(z){return b.parent.uc(z)}),depth:b.remap.depth})},Sc:function(){switch(b.connectivityUp){case "gaussian":V=Sa.a(b.connectivity);break;case "direct":V=Ta.a(b.connectivity);break;case "square":V=Ua.a(b.connectivity);break;case "squareFast":V=Va.a(b.connectivity,b.activation);break;case "full":V=Wa.a(b.connectivity);break;case "conv":t=b.kernelsNumber,V=Xa.a(b.connectivity),w&&(h=X.a({width:ca,isFloat:!0,isFlipY:!1,isPot:!1}))}if(V.W){var z=b.size*b.sparsity;
va=Math.log(z/b.size)/Math.log(2);la=X.a({isMipmap:!0,isFloat:!0,isPot:!0,width:z,Ab:va});Z=X.a({isFloat:!0,isPot:!0,width:b.size})}},F:function(z,y){P=z;V.W?(la.A(),x&&I.b(2),V.F(K),la.b(0),la.nb(va),Z.A(),x?u.set("s0"):(u.set("s28"),u.u("u27",Ca),I.b(1)),la.gb(va,0),M.g(!1,!1),u.set(xa),O?aa.j():da.j(),Z.b(0),L&&F.lc(),M.g(!1,!1)):(da.A(),I.b(1),V.F());O&&(u.set(T),Y.j(),aa.b(0),M.g(!1,!1),u.set("s46"),u.u("u6",1),da.j(),Y.b(1),M.g(!1,!1));if(r)return pa?(H.A(),da.b(0),u.set(d),u.P("u7",1/b.size,
1/b.size),M.g(!1,!1),y=H):y=da,y.b(0),w&&(h.j(),u.set("s22"),u.P("u14",t,ca/t),M.g(!1,!1),y=h,h.b(0)),y;if("softmax"===b.type){u.set("s20");da.b(0);N.j();M.g(!1,!1);b.disableNormalize?z=N:(u.set("s2"),N.b(0),ea.b(1),Q.j(),M.g(!1,!1),u.set("s0"),n.A(),Q.b(0),Q.nb(!1),M.g(!1,!1),u.set("s21"),l.A(),Q.gb(!1,0),u.u("u12",da.wc()),n.b(1),M.g(!1,!1),z=l);if(y){switch(m){case "cpuRGBAAvg":break;default:var G=E.Jb(z)}return G}return!1}if(b.cost){u.set("gpuRawAvg"===m?"s8":"s7");y=da;b.disableNormalize||(u.u("u4",
1/b.size),l.A(),da.b(0),M.g(!1,!1),y=l);switch(m){case "cpuRGBA2Float":y.jb();G=E.Jb(y);v(G);break;case "gpuRawAvg":case "gpuRaw":y.b(0),v(y)}return!1}},gc:function(z){z&&"undefined"!==typeof z.Hb&&(m=z.Hb,v=z.Kc);da=X.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(n=X.a({isFloat:!0,isPot:!0,width:1}));var y=0,G=0,oa="undefined"!==typeof b.num_classes&&b.num_classes?b.num_classes:b.size*b.size;for(z=0;z<oa;++z)c.push(y+(b.size-1-G)*b.size),f.push([-1,-1,-1,
-1]),++y,y===b.size&&(y=0,++G);b.disableNormalize||(l=X.a({isFloat:!0,isPot:!0,width:b.size}))},Jb:function(z){z.jb();var y=z.Kb();c.forEach(function(G,oa){f[oa][0]=y[0][G];f[oa][1]=y[1][G];f[oa][2]=y[2][G];f[oa][3]=y[3][G]});return f}};b.V&&E.Sc(b.V);return E}};
function Ya(){var b={Id:!1},c,f,l;b||(b={});this.uc=function(n){return c[n]};this.Oc=function(n){var m=!1;c=n.map(function(v,r){return m=v=Qa.a({index:r,parent:this,Yc:v,V:m})});f=c[0];l=c[c.length-1];c.forEach(function(v,r){0!==r&&v.Lc()})};this.F=function(n,m){var v=m;c.forEach(function(r){v=r.F(v,n)});return v};this.ob=function(){return f.w()};this.wa=function(){return l.vc()};this.Rc=function(n){l.gc(n)};this.qb=function(){return l.qb()}}
var Ta={a:function(b){var c=X.a(b.weights);delete b.weights.data;return{W:!0,ja:function(){return 1},xc:function(){return c},F:function(){u.set("s27");c.b(1);M.g(!1,!1)}}}},Wa={a:function(b){var c=b.fromLayerSize,f=X.a(b.weights);return{W:!0,ja:function(){return c},F:function(l){if(l.isEnabled){u.set("s25");l.Ec.b(3);var n,m=Math.min(l.layers.length,l.depth);for(n=0;n<m;++n)l.layers[n].ac(4+n)}else u.set("s24");u.u("u18",b.toLayerSize);f.b(1);M.g(!1,!1)}}}},Sa={a:function(b){var c=b.toSparsity*b.toLayerSize,
f=c/b.fromLayerSize,l=X.a(b.weights);X.a({width:c,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var n=X.a({width:c,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{W:!0,ja:function(){return f},F:function(){u.set("s23");l.b(1);n.b(2);M.g(!1,!0)}}}},Ua={a:function(b){var c=b.fromLayerSize,f=b.toLayerSize,l=b.toSparsity,n=l*f,m=n/c,v=c/f,r,h,t,w,x=0,F=0,L=0,K=Array(l*f*l*f*4),P=Array(l*f*l*f*4),N=Array(c*c);for(r=0;r<N.length;++r)N[r]=0;var Q=Math.floor(l/2),g=.5/f,B=
.5/c,D=.5/n;for(r=0;r<f;++r)for(h=0;h<f;++h){var ea=Math.round(r*v);var xa=Math.round(h*v);var Ca=r/f;var pa=h/f;Ca+=g;pa+=g;for(t=0;t<l;++t)for(w=0;w<l;++w){var ca=x/n;var d=F/n;var H=ea+t-Q;var O=xa+w-Q;0>H&&(H+=c);0>O&&(O+=c);H>=c&&(H-=c);O>=c&&(O-=c);var T=H/c;var aa=O/c;d=1-d-1/n;T+=B;aa+=B;ca+=D;d+=D;var Y=r*l+t,la=h*l+w;la=f*l-la-1;Y=la*f*l+Y;K[4*Y]=ca;K[4*Y+1]=d;K[4*Y+2]=T;K[4*Y+3]=aa;T=N[O*c+H]++;aa=T%m;H=H*m+aa;O=O*m+(T-aa)/m;O=c*m-1-O;O=O*c*m+H;P[4*O]=ca;P[4*O+1]=d;P[4*O+2]=Ca;P[4*O+3]=
pa;++x>=n&&(x=0,++F);++L}}var va=X.a(b.weights);X.a({width:n,isFloat:!0,array:new Float32Array(P),isPot:!0});P=null;var Z=X.a({width:n,isFloat:!0,array:new Float32Array(K),isPot:!0});K=null;return{W:!0,ja:function(){return m},F:function(){u.set("s23");va.b(1);Z.b(2);M.g(!1,!1)}}}},Xa={a:function(b){var c=b.kernelsNumber,f=b.toSparsity,l=f*b.toLayerSize/b.fromLayerSize,n=X.a(b.weights);return{W:!0,ja:function(){return l},Ed:function(){return f},xc:function(){return n},F:function(){u.set("s26");u.u("u24",
c);u.u("u25",f);u.u("u18",b.toLayerSize);u.u("u26",b.fromLayerSize);n.b(1);M.g(!1,!1)}}}},Va={a:function(b,c){var f=b.fromLayerSize,l=b.toLayerSize,n=b.toSparsity,m=b.stride?b.stride:1,v=n*l/f,r=l<f,h=f/l,t=X.a(b.weights),w="s47"+[f.toString(),l.toString(),n.toString(),m.toString(),c].join("_");u.oc(w)||(b=Ea(c),l=[{type:"1f",name:"u18",value:l},{type:"1f",name:"u32",value:m}],r&&l.push({type:"1f",name:"u26",value:f}),f=[(r?v:n).toFixed(1),b],r&&f.push(h.toFixed(1)),u.sb(r?"s40":"s39",w,f),u.H(w,
l.concat([{type:"1i",name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{W:!1,ja:function(){return v},F:function(){u.set(w);t.b(3);M.g(!1,!1)}}}},Ra=function(){var b,c,f,l,n,m,v,r,h;return{l:function(t){b=t.Cb?t.Cb:3;c=t.width?t.width:64;l=t.Bc?!0:!1;t={isFloat:!1,width:c,isPot:!1,isFlipY:!1};n=X.a(t);m=X.a(t);v=X.a(t);r=X.a(t);h=X.a({isFloat:!0,width:c,isPot:!1,isFlipY:!1});f=1/c},Wa:function(t){u.set("s37");for(var w=0;w<b;++w)n.j(),u.P("u7",f,0),M.g(l,!1),
m.j(),n.b(0),u.P("u7",0,f),M.g(l,!1),m.b(0);u.set("s36");r.j();t.b(0);M.g(l);u.set("s37");for(w=0;w<b;++w)v.j(),r.b(0),u.P("u7",f,0),M.g(l,!1),r.j(),v.b(0),u.P("u7",0,f),M.g(l,!1);u.set("s38");h.j();t.b(0);m.b(1);r.b(2);M.g(l,!1);h.b(0)},wa:function(){return h}}}();function Za(b,c){b[c]=!0;b.setAttribute(c,"true")}function $a(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function ab(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}function bb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function cb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function db(b){if(!b)return b;var c=!1;if(b.video){var f=function(l){var n={};"undefined"!==typeof l.min&&(n.min=l.min);"undefined"!==typeof l.max&&(n.max=l.max);"undefined"!==typeof l.ideal&&(n.ideal=l.ideal);return n};c={};"undefined"!==typeof b.video.width&&(c.width=f(b.video.width));"undefined"!==typeof b.video.height&&(c.height=f(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=b.video.facingMode)}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);
return c}function eb(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function fb(b){function c(x){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(F,L){return Math.abs(F-x)-Math.abs(L-x)})}function f(x){var F=db(b);l.push(x(F))}var l=[];if(!b||!b.video)return l;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal)for(var n=c(b.video.width.ideal).slice(0,3),m=c(b.video.height.ideal).slice(0,3),v=0,r;v<n.length;++v){r=n[v];for(var h=0,t;h<m.length;++h)if(t=m[h],r!==b.video.width.ideal||t!==b.video.height.ideal){var w=
Math.max(r,t)/Math.min(r,t);w<4/3-.1||w>16/9+.1||f(function(x){x.video.width.ideal=r;x.video.height.ideal=t;return x})}}f(function(x){return eb(x)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&f(function(x){delete x.video.width.ideal;delete x.video.height.ideal;return x}),f(function(x){delete x.video.width;delete x.video.height;return x}));b.video.facingMode&&(f(function(x){delete x.video.facingMode;return x}),b.video.width&&b.video.height&&f(function(x){eb(x);delete x.video.facingMode;
return x}));l.push({audio:b.audio,video:!0});return l}function gb(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(l){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var f=b.video.height;c&&f&&c.ideal&&f.ideal&&c.ideal>f.ideal&&(b.video.height=c,b.video.width=f)}}
function hb(b){b.volume=0;Za(b,"muted");if(bb()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;Za(b,"muted")},5)}}
function ib(b,c,f,l){function n(v){m||(m=!0,f(v))}var m=!1;navigator.mediaDevices.getUserMedia(l).then(function(v){function r(){setTimeout(function(){if(b.currentTime){var h=b.videoWidth,t=b.videoHeight;if(0===h||0===t)n("VIDEO_NULLSIZE");else{h&&(b.style.width=h.toString()+"px");t&&(b.style.height=t.toString()+"px");h={fc:null,Xc:null,Fc:null};try{var w=v.getVideoTracks()[0];w&&(h.Fc=w,h.fc=w.getCapabilities(),h.Xc=w.getSettings())}catch(x){}bb()||$a()?b.parentNode&&null!==b.parentNode?(m||c(b,v,
h),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),hb(b),m||c(b,v,h),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";hb(b);setTimeout(function(){b.play()},100)},80)):m||c(b,v,h)}}else n("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=v:(b.src=window.URL.createObjectURL(v),b.videoStream=v);hb(b);b.addEventListener("loadeddata",function(){var h=b.play();hb(b);"undefined"===typeof h?
r():h.then(function(){r()}).catch(function(){n("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(v){n(v)})}
function jb(b,c,f){var l=cb()?document.createElement("video"):!1;if(l)if(cb()){if(f&&f.video){if($a()){var n=ab();(12>n[0]||12===n[0]&&2>n[1])&&gb(f)}f.video.width&&f.video.width.ideal&&(l.style.width=f.video.width.ideal+"px");f.video.height&&f.video.height.ideal&&(l.style.height=f.video.height.ideal+"px")}Za(l,"autoplay");Za(l,"playsinline");f&&f.audio?l.volume=0:Za(l,"muted");ib(l,b,function(){function m(r){if(0===r.length)c("INVALID_FALLBACKCONSTRAINS");else{var h=r.shift();ib(l,b,function(){m(r)},
h)}}var v=fb(f);m(v)},f)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}function kb(b){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return b(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(f){return f.kind&&-1!==f.kind.toLowerCase().indexOf("video")&&f.label&&f.deviceId}))&&c.length&&0<c.length?b(c,!1):b(!1,"NODEVICESFOUND")}).catch(function(){b(!1,"PROMISEREJECTED")})}
window.JEEFACEFILTERAPI=function(){var b,c,f,l,n,m,v,r,h,t,w,x,F,L;function K(e){if(z!==E.pause){var q=z===E.play?G.ra:I.Yb;Aa=setTimeout(g.bind(null,e),q)}}function P(){if(z===E.play)return!1;z=E.play;C.timestamp=Date.now();W&&window.cancelAnimationFrame(W);g(0)}function N(e,q,A,U,R){e=4*(3*q+e)+A;return U+(ta[e]/255+ta[e+12]/65025)*(R-U)}function Q(){J.R();M.reset();X.reset();u.X();u.kb();a.disable(a.DEPTH_TEST);a.disable(a.BLEND);M.fa();u.na()}function g(){if(z!==E.pause){u.kb();M.reset();M.fa();
a.disable(a.DEPTH_TEST);J.R();u.na();if(!y.Sa){var e=y.element.currentTime-y.Ba;0>e&&(y.Ba=y.element.currentTime);1E3*e<I.dd||(y.oa.refresh(),y.Ba+=e,u.set("s50"),y.pa.A(),y.oa.b(0),M.g(!1,!1))}if(k.K.length>C.G)k.K.splice(0,k.K.length-C.G);else for(;k.K.length<C.G;)k.K.push(0);if(1!==k.i)if(ma.every(pa)){for(var q=0,A=e=0;A<ma.length;++A)ma[A].detected>q&&(q=ma[A].detected,e=0);for(q=0;q<C.G;++q)k.K[q]=e}else{q=0;e=!1;for(A=k.zb;q<C.G;++q){if(pa(ma[A]))if(e){do++A===k.i&&(A=0);while(pa(ma[A]))}else e=
!0;k.K[q]=A++;A>=k.i&&(A=0)}k.zb=A}for(e=0;e<C.G;++e)k.S=k.K[e],k.Va=(.5+k.S)/k.i,k.wb=k.K.lastIndexOf(k.S)===e,u.set("s51"),G.$&&u.u("u38",ma[k.S].rz),1!==k.i&&u.u("u37",k.Va),ha.A(),y.pa.b(0),qa.b(1),M.g(!1,!1),ha.b(0),oa.F(!1,ha);e=Date.now();C.ia=e-C.timestamp;C.timestamp=e;-1!==S.nDetectsPerLoop?C.G=S.nDetectsPerLoop:(e=I.Fa,C.Eb=C.Db/C.ia,C.Fb=C.Eb*e+C.Fb*(1-e),C.Gb=1E3/C.ia,C.ba=C.Gb*I.Fa+C.ba*(1-I.Fa),C.ba>I.Z[1]?(e=I.qa[1],1<k.i&&(e+=1,q=ma.filter(ca).length,e*=Math.max(1,q)),C.G=Math.min(C.G+
1,e),C.ba=(I.Z[0]+I.Z[1])/2):C.ba<I.Z[0]&&(C.G=Math.max(C.G-1,I.qa[0]),C.ba=(I.Z[0]+I.Z[1])/2));J.J();a.viewport(0,0,3,2*k.i);u.set("s49");qa.b(0);M.g(!1,!1);a.readPixels(0,0,3,2*k.i,a.RGBA,a.UNSIGNED_BYTE,ta);for(e=0;e<k.i;++e)if(-1!==k.K.indexOf(e)){var U=e;q=wa[U];var R=[U];A=ma[U];var ia=na[U],ra=2*U;q.ua=N(1,ra,3,0,1);A.detected=ja(A.detected,q.ua,I.Vb);if(q.ua<I.Ua)G.$&&(A.rz=0);else{q.x=N(0,ra,1,-1,1);q.y=N(0,ra,2,-1,1);q.M=N(0,ra,3,0,1);q.Xa=N(1,ra,0,-ya[0],ya[0]);q.Ya=N(1,ra,1,-ya[1],ya[1]);
q.ma=N(1,ra,2,-ya[2],ya[2]);for(var Ga=0;Ga<I.Aa;++Ga)q.mb[Ga]=I.pc[Ga](N(2,ra,Ga,0,1));R.La=q.x-A.x;R.Ma=q.y-A.y;R.Ka=q.M-A.s;R.Ha=q.Xa-A.rx;R.Ia=q.Ya-A.ry;R.Ja=G.$?q.ma:q.ma-A.rz;ra=Math.sqrt(R.La*R.La+R.Ma*R.Ma+R.Ka*R.Ka)/C.ia;R=Math.sqrt(R.Ha*R.Ha+R.Ia*R.Ia+R.Ja*R.Ja)/C.ia;ra=1-Ba(ka.translationFactorRange[0],ka.translationFactorRange[1],ra);R=1-Ba(ka.rotationFactorRange[0],ka.rotationFactorRange[1],R);R=ra*R*Ba(ka.qualityFactorRange[0],ka.qualityFactorRange[1],q.ua);U=ia[++ua[U]%ia.length]=R;
for(ra=0;ra<ia.length;++ra)U=Math.min(U,ia[ra]);U=Math.max(.5,U);R=Math.min(U,R);ia=ja(ka.alphaRange[1],ka.alphaRange[0],Math.pow(R,I.Xb));A.x=ja(A.x,q.x,ia);A.y=ja(A.y,q.y,ia);A.s=ja(A.s,q.M,ia);A.rx=ja(A.rx,q.Xa,ia);A.ry=ja(A.ry,q.Ya,ia);A.rz=G.$?A.rz+ia*q.ma:ja(A.rz,q.ma,ia);ia=Math.max(ia,I.Wb);for(U=0;U<I.Aa;++U)A.expressions[U]=ja(A.expressions[U],q.mb[U],ia);++q.za}}J.bd();J.reset();X.reset();a.enable(a.DEPTH_TEST);G.ta&&(1===k.i?G.ta(ma[0]):G.ta(ma));a.disable(a.BLEND);z===E.play&&(W=window.requestAnimationFrame(K))}}
function B(){function e(A){for(var U=[],R=0;R<k.i;++R)U.push(Object.assign({},A));return U}y.pa=X.a({isPot:!1,isLinear:!0,isFloat:!1,width:sa,height:ba});ha=X.a({isPot:!0,isFloat:!1,width:oa.ob()});var q={width:3,height:k.i,isFloat:!0,isPot:!1,array:function(A){for(var U=new Float32Array(A.length*k.i),R=0,ia;R<k.i;++R)for(ia=0;ia<A.length;++ia)U[R*A.length+ia]=A[ia];return U}(new Float32Array([0,S.borderWidth,S.borderHeight,0,0,0,0,0,0,0,0,0]))};qa=Ma.a(q);ta=new Uint8Array(8*q.width*k.i);wa=e({ua:0,
x:0,y:0,M:1,Xa:0,Ya:0,ma:0,mb:new Float32Array(I.Aa),za:0});ma=e({detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,expressions:new Float32Array(I.Aa)});e({La:0,Ma:0,Ka:0,Ha:0,Ia:0,Ja:0})}function D(){u.H("s51",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u35",value:1},{type:"2f",name:"u36",value:fa},{type:"1f",name:"u37",value:.5},{type:"1f",name:"u38",value:0}]);u.H("s52",[{type:"1i",name:"u39",value:0},{type:"1i",name:"u35",value:1},{type:"1f",name:"u42",value:I.ad},{type:"1f",name:"u43",value:I.Sb},{type:"1f",
name:"u44",value:I.Rb},{type:"3f",name:"u41",value:[I.$a[0]*fa[0],I.$a[1]*fa[1],I.$a[2]]},{type:"1f",name:"u37",value:.5},{type:"1f",name:"u45",value:1},{type:"1f",name:"u38",value:0}]);var e=[{type:"1i",name:"u39",value:0}];u.H("s53",e);u.H("s54",e);u.H("s49",[{type:"1i",name:"u35",value:0},{type:"1f",name:"u48",value:fa[0]},{type:"2f",name:"u47",value:[0,.5/k.i]}])}function ea(){var e=oa.ob(),q=sa/e;m=S.minScale*q;v=S.maxScale*q;r=(1-2*S.borderWidth)/S.nStepsX;h=(1-2*S.borderHeight)/S.nStepsY;t=
(v-m)/S.nStepsScale;w=S.borderWidth;x=S.borderHeight;F=1-S.borderWidth;L=1-S.borderHeight;fa=[e/sa,e/ba];b=S.borderWidth;c=S.borderHeight;f=m;l=S.borderWidth;n=S.borderHeight;Da=m}function xa(e){if(G.ca)load_NNC("string"===typeof G.ca?JSON.parse(G.ca):G.ca,e);else{var q=G.bb;"JSON"!==q.toUpperCase().split(".").pop()&&(q+=I.save);za(q,function(A){A=JSON.parse(A);A.exportData&&A.exportData.thetaXYZfactor&&(ya=A.exportData.thetaXYZfactor);e(A)})}}function Ca(){if(La.l({ha:G.N,width:sa,height:ba,debug:!1,
Jc:function(){Z("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(La.Ac())return!0;Z("GL_INCOMPATIBLE");return!1}Z("GL_INCOMPATIBLE");return!1}function pa(e){return e.detected<I.Ua}function ca(e){return e.detected>I.Ua}function d(e,q,A,U){return A>e?Math.max(0,e+q/2-(A-U/2)):Math.max(0,A+U/2-(e-q/2))}function H(){return wa.some(function(e,q){if(q===k.S)return!1;q=wa[k.S];if(q.za>e.za||3>e.za||d(q.x/2,q.M,e.x/2,e.M)<I.Bb*q.M)return!1;var A=sa/ba;return d(q.y/2,q.M*A,e.y/2,e.M*A)>I.Bb*q.M*
A})}function O(){var e=k.S;qa.Tc(1);1!==k.i&&(a.viewport(0,0,3,k.i),u.set("s0"),u.Mb("u1",1),M.g(!1,!1),u.Mb("u1",0));a.viewport(0,e,1,1);u.set("s52");G.$&&u.u("u38",ma[e].rz);1!==k.i&&u.u("u37",k.Va);if(1<k.i){var q=H()?0:1;u.u("u45",q)}u.Vc("u40",l,n,Da);M.g(!1,!1);k.wb&&(a.viewport(1,e,1,1),u.set("s53"),M.g(!1,!1),a.viewport(2,e,1,1),u.set("s54"),M.g(!1,!1));f+=t;f>v&&(b+=r,f=m,b>F&&(b=w,c+=h,c>L&&(c=x)));l=b+.8*(Math.random()-.5)*r;n=c+.8*(Math.random()-.5)*h;Da=f+.8*(Math.random()-.5)*t}function T(){y.oa=
X.a({D:y.element,isPot:!1,isFloat:!1,isFlipY:!0})}function aa(){u.H("s50",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u34",value:y.C}])}function Y(){y.B[0]=.5;y.B[1]=.5;var e=y.O[1]/y.O[0],q=La.L()/La.w();90===Math.abs(V.rotate)&&(e=1/e);e>q?y.B[1]*=q/e:y.B[0]*=e/q;u.H("s52",[{name:"u46",type:"1f",value:q}]);y.C[0]=0;y.C[1]=0;y.C[2]=0;y.C[3]=0;switch(V.rotate){case 0:y.C[0]=y.B[0];y.C[3]=y.B[1];break;case 180:y.C[0]=-y.B[0];y.C[3]=-y.B[1];break;case 90:y.C[1]=y.B[0];y.C[2]=-y.B[1];break;case -90:y.C[1]=
-y.B[0],y.C[2]=y.B[1]}}function la(e,q){if(z===E.error)return!1;var A=e.videoHeight;y.O[0]=e.videoWidth;y.O[1]=A;y.element=e;q&&q();return!0}function va(e,q,A){e&&e();e={video:{facingMode:{ideal:V.facingMode},width:{min:V.minWidth,max:V.maxWidth,ideal:V.idealWidth},height:{min:V.minHeight,max:V.maxHeight,ideal:V.idealHeight}},audio:!1};V.deviceId&&(e.deviceId=V.deviceId);jb(function(U){q&&q(U);A(U)},function(){Z("WEBCAM_UNAVAILABLE")},e)}function Z(e){z!==E.error&&(z=E.error,G.ga_&&G.ga_(e))}function da(e,
q){for(var A in e)"undefined"!==typeof q[A]&&(e[A]=q[A]);q===S&&S.nDetectsPerLoop&&(C.G=S.nDetectsPerLoop,C.Db=S.nDetectsPerLoop)}var I={save:"NNC.json",eb:0,Yb:25,Fa:.2,Z:[45,55],fd:1/3.5,qa:[2,6],Mc:{minScale:.15,maxScale:.6,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,nDetectsPerLoop:-1},$a:[.092,.092,.3],ad:50,Bb:.12,Ua:.6,Gc:8,Sb:.75,Rb:1,Zc:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],
alphaRange:[.05,1]},$c:[.65,1,.262],Vb:.2,Xb:2,Wb:.1,Hc:8,Aa:1,pc:[Ba.bind(null,.3,.75)],dd:20},V={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0},E={Dc:-1,error:-2,rb:0,play:1,pause:2},z=E.rb,y={Sa:!1,element:!1,oa:!1,pa:!1,O:[0,0],B:[.5,.5],C:[.5,0,0,.5],Ba:0},G={ga_:!1,ta:!1,bb:"./",ca:!1,N:!1,ra:I.eb,Ib:I.eb,ya:!1,$:!1},oa,S=Object.create(I.Mc),ka=Object.create(I.Zc);var Da=f=n=l=c=b=v=m=L=F=x=w=t=h=r=0;var sa,ba,fa,ha,qa,ta,wa,
ma,Aa=!1,W=!1,ya=I.$c,k={i:1,S:0,K:[0],wb:!1,zb:0,Va:0},C={ia:0,timestamp:0,Eb:0,Fb:0,G:I.qa[0],Db:I.qa[0],Gb:0,ba:0,md:1},na=[],ua=[];return{init:function(e){function q(){z!==E.error&&2===++U&&(Y(),T(),aa(),G.ga_&&(G.ga_(!1,{GL:a,canvasElement:G.N,videoTexture:y.pa.get(),maxFacesDetected:k.i}),Q()),P())}if(z!==E.rb)return e.callbackReady&&e.callbackReady("ALREADY_INITIALIZED"),!1;z=E.Dc;e.callbackReady&&(G.ga_=e.callbackReady);e.callbackTrack&&(G.ta=e.callbackTrack);"undefined"!==typeof e.animateDelay&&
(G.ra=e.animateDelay);"undefined"!==typeof e.NNCpath&&(G.bb=e.NNCpath);"undefined"!==typeof e.NNC&&(G.ca=e.NNC);"undefined"!==typeof e.maxFacesDetected&&(k.i=Math.max(1,e.maxFacesDetected));"undefined"!==typeof e.followZRot&&(G.$=e.followZRot?!0:!1);if(k.i>I.Gc)return Z("MAXFACES_TOOHIGH"),!1;if(!e.canvasId&&!e.canvas)return Z("NO_CANVASID"),!1;G.N=e.canvas?e.canvas:document.getElementById(e.canvasId);if(!G.N)return Z("INVALID_CANVASID"),!1;sa=G.N.width;ba=G.N.height;if(!sa||!ba)return Z("INVALID_CANVASDIMENSIONS"),
!1;for(var A=0;A<k.i;++A)na.push(new Float32Array(I.Hc)),ua.push(0);e.scanSettings&&da(S,e.scanSettings);e.stabilizationSettings&&da(ka,e.stabilizationSettings);var U=0;e.videoSettings&&e.videoSettings.videoElement?la(e.videoSettings.videoElement,q):(e.videoSettings&&da(V,e.videoSettings),va(e.onWebcamAsk,e.onWebcamGet,function(R){la(R,q)}));xa(function(R){if(!Ca())return!1;oa=new Ya;oa.Oc(R.layers);oa.Rc({Hb:"gpuRawAvg",Kc:O});u.Ub([{id:"s50",name:"_",Y:"attribute vec2 a0;uniform mat2 u34;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u34*a0;}",
sa:["a0"],da:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u34"],precision:"lowp"},{id:"s51",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Y:"attribute vec2 a0;uniform sampler2D u35;uniform vec2 u36;uniform float u37,u38;varying vec2 vv0;void main(){vec4 a=texture2D(u35,vec2(.17,u37));vec2 d=a.gb,e=a.a*u36;float b=cos(u38),c=sin(u38);vec2 g=mat2(b,c,-c,b)*a0;vv0=d+g*.5*e,gl_Position=vec4(a0,0.,1.);}",
sa:["a0"],da:[2],f:["u1","u35","u36","u37","u38"],precision:"lowp"},{id:"s52",name:"_",c:"uniform sampler2D u39,u35;uniform vec3 u40,u41;uniform float u42,u43,u44,u37,u45,u38,u46;const vec4 n=vec4(1.,1.,1.,1.),o=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u39,vec2(.625,.625)),h=texture2D(u39,vec2(.875,.625)),a=texture2D(u35,vec2(.17,u37));float b=dot(g,e),i=dot(h,e);bool j=b>u43&&b>i+u44;j?a.r=2.:a.r>u42?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u45;if(a.r<.9)a=vec4(1.,u40);else{a.r*=step(1.9,a.r);float k=dot(e,texture2D(u39,vec2(.875,.875))),l=dot(e,texture2D(u39,vec2(.125,.625))),m=dot(e,texture2D(u39,vec2(.375,.625))),c=cos(u38),d=sin(u38);vec2 f=mat2(c,d*u46,-d/u46,c)*vec2(k,l);a.gba+=vec3(f,m)*u41*a.a;}gl_FragColor=a;}",
Y:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",f:"u39 u35 u40 u42 u41 u45 u38 u46 u43 u44 u37".split(" ")},{id:"s53",name:"_",Y:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u39;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u39,vec2(.125,.875))),b=dot(e,texture2D(u39,vec2(.375,.875))),c=dot(e,texture2D(u39,vec2(.625,.875))),d=dot(e,texture2D(u39,vec2(.625,.625)));vec3 f=vec3(a,b,c)*.5+g;gl_FragColor=vec4(f,d);}",
f:["u39"]},{id:"s54",name:"_",Y:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u39;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u39,vec2(.25,.25)));gl_FragColor=vec4(a,0.,0.,0.);}",f:["u39"]},{id:"s49",name:"_",c:"uniform sampler2D u35;uniform vec2 u47;uniform float u48;varying vec2 vv0;void main(){float g=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u35,vv0+u47);a.a=mix(a.a*u48,a.a,c);vec4 d=floor(255.*a),f=255.*(255.*a-d),b=mix(d,f,g)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
f:["u35","u48","u47"]}]);B();ea();D();q()});return!0},toggle_pause:function(e){if(-1!==[E.play,E.pause].indexOf(z))return e?z!==E.play?e=!1:(Aa&&(clearTimeout(Aa),Aa=!1),W&&(window.cancelAnimationFrame(W),W=!1),z=E.pause,e=!0):e=P(),e},toggle_slow:function(e){-1!==[E.play,E.pause].indexOf(z)&&z===E.play&&(e&&!G.ya?(G.Ib=G.ra,S.nDetectsPerLoop=1,this.Pc(100),G.ya=!0):!e&&G.ya&&(S.nDetectsPerLoop=-1,this.Pc(G.Ib),G.ya=!1))},set_animateDelay:function(e){G.ra=e},resize:function(){var e=G.N.width,q=G.N.height;
if(e===sa&&q===ba)return!1;sa=e;ba=q;ea();D();Y();aa();return!0},set_inputTexture:function(e,q,A){y.O[0]=q;y.O[1]=A;y.Sa=!0;Y();Q();aa();u.set("s50");y.pa.A();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,e);M.g(!0,!0)},reset_inputTexture:function(){y.O[0]=y.element.videoWidth;y.O[1]=y.element.videoHeight;y.Sa=!1;Y();aa()},get_videoDevices:function(e){return kb(e)},set_scanSettings:function(e){da(S,e);ea();D()},set_stabilizationSettings:function(e){da(ka,e)},update_videoElement:function(e,
q){la(e,function(){T();Y();q&&q()})}}}();
;if(typeof(module)!=='undefined'){module.exports=JEEFACEFILTERAPI;}